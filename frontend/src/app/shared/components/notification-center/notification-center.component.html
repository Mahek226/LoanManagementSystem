<!-- Notification Center -->
<div class="notification-center">
  <!-- Notification Bell Icon -->
  <div class="notification-bell" 
       (click)="toggleNotificationCenter()"
       [class.has-notifications]="unreadCount > 0">
    <i class="fas fa-bell"></i>
    <span *ngIf="unreadCount > 0" class="notification-badge">
      {{ unreadCount > 99 ? '99+' : unreadCount }}
    </span>
  </div>

  <!-- Notification Panel -->
  <div class="notification-panel" [class.open]="isOpen">
    <!-- Header -->
    <div class="notification-header">
      <div class="header-title">
        <i class="fas fa-bell"></i>
        <span>Notifications</span>
        <span *ngIf="unreadCount > 0" class="unread-count">({{ unreadCount }})</span>
      </div>
      <div class="header-actions">
        <button class="action-btn" 
                (click)="markAllAsRead()" 
                [disabled]="unreadCount === 0"
                title="Mark all as read">
          <i class="fas fa-check-double"></i>
        </button>
        <button class="action-btn" 
                (click)="clearAllNotifications()" 
                [disabled]="notifications.length === 0"
                title="Clear all">
          <i class="fas fa-trash"></i>
        </button>
        <button class="action-btn close-btn" 
                (click)="toggleNotificationCenter()"
                title="Close">
          <i class="fas fa-times"></i>
        </button>
      </div>
    </div>

    <!-- Filters -->
    <div class="notification-filters">
      <button *ngFor="let filter of filters" 
              class="filter-btn"
              [class.active]="activeFilter === filter.key"
              (click)="setFilter(filter.key)">
        <i [class]="filter.icon"></i>
        <span>{{ filter.label }}</span>
      </button>
    </div>

    <!-- Notifications List -->
    <div class="notifications-list">
      <div *ngIf="filteredNotifications.length === 0" class="empty-state">
        <i class="fas fa-bell-slash"></i>
        <p>No notifications</p>
        <small>You're all caught up!</small>
      </div>

      <div *ngFor="let notification of filteredNotifications; trackBy: trackByNotificationId" 
           class="notification-item"
           [class.unread]="!notification.read"
           [class.urgent]="notification.priority === 'urgent'"
           [class.high]="notification.priority === 'high'"
           (click)="markAsRead(notification)">
        
        <!-- Notification Icon -->
        <div class="notification-icon" [class]="'type-' + notification.type">
          <i [class]="getNotificationIcon(notification.type)"></i>
        </div>

        <!-- Notification Content -->
        <div class="notification-content">
          <div class="notification-title">{{ notification.title }}</div>
          <div class="notification-message">{{ notification.message }}</div>
          
          <!-- Metadata -->
          <div class="notification-meta">
            <span class="timestamp">{{ getRelativeTime(notification.timestamp) }}</span>
            <span class="category">{{ notification.category }}</span>
            <span *ngIf="notification.priority === 'urgent'" class="priority urgent">
              <i class="fas fa-fire"></i> Urgent
            </span>
            <span *ngIf="notification.priority === 'high'" class="priority high">
              <i class="fas fa-exclamation"></i> High
            </span>
          </div>

          <!-- Action Button -->
          <button *ngIf="notification.actionable && notification.action" 
                  class="notification-action"
                  (click)="executeNotificationAction(notification); $event.stopPropagation()">
            {{ notification.action.label }}
            <i class="fas fa-arrow-right"></i>
          </button>
        </div>

        <!-- Delete Button -->
        <button class="delete-btn" 
                (click)="deleteNotification(notification); $event.stopPropagation()"
                title="Delete notification">
          <i class="fas fa-times"></i>
        </button>

        <!-- Unread Indicator -->
        <div *ngIf="!notification.read" class="unread-indicator"></div>
      </div>
    </div>

    <!-- Footer -->
    <div class="notification-footer" *ngIf="notifications.length > 0">
      <small>{{ notifications.length }} total notifications</small>
      <button class="view-all-btn" (click)="setFilter('all')">
        View All
      </button>
    </div>
  </div>

  <!-- Backdrop -->
  <div class="notification-backdrop" 
       [class.visible]="isOpen" 
       (click)="toggleNotificationCenter()"></div>
</div>
