<!-- Step 5: Review & Submit -->
<div class="step-content" *ngIf="currentStep === 5">
  <div class="step-header">
    <h3><i class="fas fa-eye me-2"></i>Review Your Application</h3>
    <p class="text-muted">Please review all details before submitting</p>
  </div>

  <div class="review-section" *ngIf="application">
    <!-- Basic Details -->
    <div class="review-card">
      <div class="review-header">
        <h5><i class="fas fa-info-circle me-2"></i>Basic Loan Details</h5>
        <button type="button" class="btn btn-sm btn-outline-primary" (click)="goToStep(1)">
          <i class="fas fa-edit"></i> Edit
        </button>
      </div>
      <div class="review-body">
        <div class="row g-3">
          <div class="col-md-6">
            <label>Loan Type:</label>
            <p>{{ application.basicDetails.loanType }}</p>
          </div>
          <div class="col-md-6">
            <label>Loan Amount:</label>
            <p>{{ formatCurrency(application.basicDetails.loanAmount) }}</p>
          </div>
          <div class="col-md-6">
            <label>Tenure:</label>
            <p>{{ application.basicDetails.tenure }} months</p>
          </div>
          <div class="col-md-6">
            <label>Purpose:</label>
            <p>{{ application.basicDetails.purpose }}</p>
          </div>
          <div class="col-md-6" *ngIf="application.basicDetails.hasCoApplicant">
            <label>Co-Applicant:</label>
            <p>{{ application.basicDetails.coApplicantName }} ({{ application.basicDetails.coApplicantRelation }})</p>
          </div>
          <div class="col-md-6" *ngIf="application.basicDetails.hasCollateral">
            <label>Collateral:</label>
            <p>{{ application.basicDetails.collateralType }} - {{ formatCurrency(application.basicDetails.collateralValue || 0) }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Financial Details -->
    <div class="review-card">
      <div class="review-header">
        <h5><i class="fas fa-money-bill-wave me-2"></i>Financial Information</h5>
        <button type="button" class="btn btn-sm btn-outline-primary" (click)="goToStep(2)">
          <i class="fas fa-edit"></i> Edit
        </button>
      </div>
      <div class="review-body">
        <div class="row g-3">
          <div class="col-md-6">
            <label>Employment Type:</label>
            <p>{{ application.financialDetails.employmentType }}</p>
          </div>
          <div class="col-md-6" *ngIf="application.financialDetails.employerName">
            <label>Employer:</label>
            <p>{{ application.financialDetails.employerName }}</p>
          </div>
          <div class="col-md-6">
            <label>Monthly Income:</label>
            <p>{{ formatCurrency(application.financialDetails.monthlyGrossSalary || 0) }}</p>
          </div>
          <div class="col-md-6">
            <label>Bank Account:</label>
            <p>{{ application.financialDetails.bankName }} - {{ application.financialDetails.accountNumber }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Documents -->
    <div class="review-card">
      <div class="review-header">
        <h5><i class="fas fa-file-upload me-2"></i>Uploaded Documents</h5>
        <button type="button" class="btn btn-sm btn-outline-primary" (click)="goToStep(3)">
          <i class="fas fa-edit"></i> Edit
        </button>
      </div>
      <div class="review-body">
        <div class="documents-list">
          <div class="document-item" *ngFor="let doc of application.documents">
            <i class="fas {{ getDocumentIcon(doc.documentType) }} me-2"></i>
            <span>{{ doc.fileName }}</span>
            <span class="badge bg-success ms-2">Uploaded</span>
          </div>
        </div>
      </div>
    </div>

    <!-- EMI Summary -->
    <div class="review-card emi-summary" *ngIf="emiCalculation">
      <h5><i class="fas fa-calculator me-2"></i>EMI Summary</h5>
      <div class="emi-details-grid">
        <div class="emi-item">
          <label>Monthly EMI:</label>
          <h4>{{ formatCurrency(emiCalculation.emi) }}</h4>
        </div>
        <div class="emi-item">
          <label>Total Interest:</label>
          <p>{{ formatCurrency(emiCalculation.totalInterest) }}</p>
        </div>
        <div class="emi-item">
          <label>Total Amount:</label>
          <p>{{ formatCurrency(emiCalculation.totalAmount) }}</p>
        </div>
        <div class="emi-item">
          <label>DTI Ratio:</label>
          <p [ngClass]="getDTIClass()">{{ emiCalculation.dti }}%</p>
        </div>
      </div>
    </div>

    <!-- Final Confirmation -->
    <div class="alert alert-info">
      <h6><i class="fas fa-info-circle me-2"></i>What happens next?</h6>
      <ul class="mb-0">
        <li>Your application will be assigned a unique Application ID</li>
        <li>Our team will verify your documents (typically 2-3 business days)</li>
        <li>You'll receive email/SMS updates at each stage</li>
        <li>A loan officer may contact you for additional information</li>
        <li>Final decision will be communicated within 7-10 business days</li>
      </ul>
    </div>
  </div>
</div>
